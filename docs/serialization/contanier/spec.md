# Формат представления данных (контейнер)

Обязательная часть – метаданные контейнера, которые должны быть представлены в следующем виде:

## Cхема метаданных контейнера

```json
{
    "version": # semver–версия контейнера, строка,
    "data": # url "данных" c данными в схеме приложения,
    "data-version": # версия формата "данных",
    "application": # произвольный идентификатор приложения
}
```

## Ссылки на ресурсы

Ссылка на другой ресурс соответствуют следующей схеме для того чтобы отличить ссылку на ресурс от ссылки которая является частью самих данных:

```json
{
    "$ref": # url
}
```

Все ссылки поддерживают обращение к конкретным полям объектов при помощи указания пути к этому полю в стиле XPath в url после ссыылки на сам объект через `#`
Допускается использование относительных ссылок (они могут ссылаться только на поля того корневого объекта, в котором находятся)

Пример:

```bash
# 1.json
{
    "field": value,
    "list": [1, 2, 3, 4, 5],
    "another list": {"$ref": "/#list"}
}

# 2.json
{
    "first": {"$ref": "file://1.json/#list/1"},
    "self": {"$ref": "file://2.json"}
}
```

Предусмотрено три варианта обращения к сторонним ресурсам при помощи url:

### 1. Ресурс в виде файл

Схема url – `file`. Пример: `file://gamedata/level1/item.json`

### 2. Встроенный ресурс

Обращение к ресурсу, встроенному в приложение.
Схема url – `builtin`. Пример `builtin://resources/audio1.wav`

### 3. Удаленный ресурс

Схемы `http` и `https`
Потенциально любая схема url (http, https, ssh, magnet)

По сути, мы не менеям логики url, только добавляем свою схему – `builtin`

## Способы хранения и взаимодействия

Формат представления данных разработан чтобы не зависить от способа хранения и взаимодействия с данными.

### 0. В виде одного файла

### 1. В виде набора файлов

Все ресурсы-файлы, на которые ссылаются url'ы, должны быть расположены на такой же или большей глубине дерева каталогов относительно манифеста:

```bash
# Верно
manifest.json
data.json

# Верно
manifest.json
data/1.json

# Ошибка
data.json
some-directory/manifest.json
```

### 2. В виде .zip или .tar.gz архивов

Представляет из себя "зазипованный" вариант #1. (Заархивированная директория, в которой находится `mainfest.json`)

### 3. В виде API
